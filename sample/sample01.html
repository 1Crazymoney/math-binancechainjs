<!doctype html>
<html lang="en">
<meta charset="utf-8">

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script type="text/javascript">
        var network = {
            blockchain: "binance",
            chainId: "Binance-Chain-Tigris"
        };
        function login() {
            // identity = {
            //     account: "bnb163tgq6gv49km8mlc96az8xagha5q48e325c5ur",
            //     blockchain: "binance",
            //     chainId: "Binance-Chain-Tigris"
            // }
            mathExtension.getIdentity(network).then(identity => {
                document.getElementById("loginDiv").innerHTML = JSON.stringify(identity);
                console.log(identity);
            }).catch(e => {
                console.log(e);
            })
        }
        function logout() {
            mathExtension.forgetIdentity().then(response => {
                console.log(response);
            }).catch(e => {
                console.log(e);
            })
        }
        // Asset Transaction
        function transferTransaction() {
            var transaction = {
                chain_id: "Binance-Chain-Tigris",
                account_number: 34,
                sequence: 9,
                memo: "",
                type: "MsgSend",
                msg: {
                    inputs: [{
                        address: "bnb163tgq6gv49km8mlc96az8xagha5q48e325c5ur",
                        coins: [{
                            denom: "BNB",
                            amount: 100000
                        }]
                    }],
                    outputs: [{
                        address: "bnb1624530k8zhdcq08n62rxhv4n0d2vk4k9952l3x",
                        coins: [{
                            denom: "BNB",
                            amount: 100000
                        }]
                    }]
                }
            };
            // Request Signature
            mathExtension.requestSignature(transaction, network).then(signedTransaction => {
                console.log(JSON.stringify(signedTransaction));
                document.getElementById("signatureDiv").innerHTML = JSON.stringify(signedTransaction);
            }).catch(e => {
                console.log(e);
            })
        }
        // Other Transaction
        function signTransaction() {
            // Place Order
            var transaction = {
                chain_id: "Binance-Chain-Tigris",
                account_number: 34,
                sequence: 19,
                memo: "",
                type: "NewOrderMsg",
                msg: {
                    sender: "bnb163tgq6gv49km8mlc96az8xagha5q48e325c5ur",
                    symbol: "000-0E1",          // the market pair
                    side: 1,                    // (1-Buy, 2-Sell)
                    price: "0.0006",
                    quantity: "100",
                    timeinforce: 1              //  (1-GTC(Good Till Expire), 3-IOC(Immediate or Cancel))
                }
            };
            /*
            // Cancel Order

            var transaction = {
                chain_id: "Binance-Chain-Tigris",
                account_number: 34,
                sequence: 19,
                memo: "",
                type: "CancelOrderMsg",
                msg: {
                    sender: "bnb163tgq6gv49km8mlc96az8xagha5q48e325c5ur",
                    symbol: "000-0E1_BNB",          // the market pair
                    refid: "D45680690CA96DB3EFF82EBA239BA8BF680A9F31-20"
                }
            };
            */
            // Request Signature
            mathExtension.requestSignature(transaction, network).then(signedTransaction => {
                console.log(JSON.stringify(signedTransaction));
                document.getElementById("signatureDiv").innerHTML = JSON.stringify(signedTransaction);
            }).catch(e => {
                console.log(e);
            })
        }
    </script>
</head>

<body>
    <div id="loginDiv"></div></br>
    <button type="button" onclick="login()">Login</button></br>
    <button type="button" onclick="logout()">Logout</button></br>
    <div id="signatureDiv"></div></br>
    <button type="button" onclick="transferTransaction()">Transfer Transaction</button></br>
    <button type="button" onclick="signTransaction()">Other Transaction</button>
</body>

</html>